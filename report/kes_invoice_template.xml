<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="kes_custom_invoice">
    <t t-call="web.html_container">
      <t t-call="web.external_layout">
        <div t-foreach="data" t-as="o" class="container_kes">
          <table>
            <tr>
              <td rowspan="1" colspan="12">
                <div class="centerText">
                  <div>
                    <b>TAX INVOICE</b>
                  </div>
                  <div>
                    <span>(U/S of CGST Act                                                                                                                                                                                                                                                                                          <![CDATA[&]]> SGST Acts R. W.Sec of IGST Acts)</span>
                  </div>
                </div>
              </td>
            </tr>
            <tr>
              <td colspan="6">Invoice No :                                                                <![CDATA[&nbsp;]]>
                <span t-field="o.name"/>
              </td>
              <td colspan="6"> Invoice Date :                                                                <![CDATA[&nbsp;]]>
                <span t-field="o.invoice_date"/>
              </td>
            </tr>
            <tr>
              <td colspan="6" class="halfWidth">
                <div>Invoice To</div>
                <div>
                  <span t-field="o.invoice_to"/>
                </div>
                <div class="adressField">
                  <div t-if="o.invoice_to.street">
                    <span t-field="o.invoice_to.street"/>
                  </div>
                  <div t-if="o.invoice_to.street2">
                    <span t-field="o.invoice_to.street2"/>
                  </div>
                  <div t-if="o.invoice_to.city">
                    <span t-field="o.invoice_to.city"/>
                    <span t-if="o.invoice_to.zip" t-field="o.invoice_to.zip"/>
                  </div>
                  <div t-if="o.invoice_to.state_id">
                    <span t-field="o.invoice_to.state_id"/>
 ,                    <span t-field="o.invoice_to.country_id"/>
                  </div>
                </div>
                <div>GST No                                                                                                                                                  <![CDATA[&nbsp;]]>:                                                                                                                                                 <![CDATA[&nbsp;]]>
                  <span t-field="o.partner_id.vat"/>
                </div>
                <div>Pan No                                                                                                                                                 <![CDATA[&nbsp;]]>:                                                                                                                                                 <![CDATA[&nbsp;]]>
                  <span t-field="o.invoice_to.pan_no"/>
                </div>
              </td>
              <td colspan="6" class="halfWidth">
                <div>PO No                                                                                                                                                 <![CDATA[&nbsp;]]> :                                                                                                                                                 <![CDATA[&nbsp;]]><![CDATA[&nbsp;]]>
                  <span t-foreach="o.po_number[:-1]" t-as="p">
                    <span t-field="p.po_number"/>
                    <span t-if="o.po_number and len(o.po_number) &gt; 1"><![CDATA[&nbsp;]]> ,                                                                                                                                                                                 <![CDATA[&nbsp;]]></span>
                  </span>
                  <span t-if="o.po_number" t-esc="o.po_number[-1].po_number.po_number"/>
                </div>
              </td>
            </tr>
            <tr>
              <td rowspan="1" colspan="12">
                <div>Customer                                                                                                                               <![CDATA[&nbsp;]]>:                                                                                                                              <![CDATA[&nbsp;]]>
                  <span t-field="o.partner_id.name"/>
                </div>
                <div>
                  <span t-if="o.partner_id.street">
                    <span t-field="o.partner_id.street"/>
 ,
                  </span>
                  <span t-if="o.partner_id.street2">
                    <span t-field="o.partner_id.street2"/>
 ,
                  </span>
                  <span t-if="o.partner_id.city">
                    <span t-field="o.partner_id.city"/>
 ,
                  </span>
                  <span t-if="o.partner_id.zip">
                    <span t-field="o.partner_id.zip"/>
                  </span>
                </div>
                <div>
                  <span t-field="o.partner_id.state_id"/>
, 
                  <span t-field="o.partner_id.country_id"/>
                </div>
              </td>
            </tr>
            <tr>
              <td rowspan="1" colspan="6">
                <div>Contact Person                                                                                                                               <![CDATA[&nbsp;]]>:                                                                                                                              <![CDATA[&nbsp;]]>
                  <span t-field="o.contact_person"/>
                </div>
                <div>Contact No                                                                                                                               <![CDATA[&nbsp;]]>:                                                                                                                              <![CDATA[&nbsp;]]>
                  <span t-field="o.contact_person.phone"/>
                </div>
              </td>
              <td rowspan="1" colspan="6">
                <div>Customer Reference                                                                                                                               <![CDATA[&nbsp;]]>:                                                                                                                              <![CDATA[&nbsp;]]>
                  <span t-field="o.customer_reference"/>
                </div>
              </td>
            </tr>

            <tr>
              <td colspan="12">
                <div>Project Name                                                                                                                               <![CDATA[&nbsp;]]> :                                                                                                                               <![CDATA[&nbsp;]]>
                  <span t-field="o.project_name"/>
                </div>
              </td>
            </tr>
            <tr>
              <td colspan="12">
                <table>
                  <tr>
                    <th>
                      <div>SR.No</div>
                    </th>
                    <th>
                      <div>Test type</div>
                    </th>
                    <th>
                      <div>Report No</div>
                    </th>
                    <th>
                      <div>Quantity</div>
                    </th>
                    <th>
                      <div>Per No.</div>
                    </th>
                    <th>
                      <div>Rate (Rs.)</div>
                    </th>
                    <th>
                      <div>Amount (Rs.)</div>
                    </th>
                  </tr>


                  <tr t-foreach="o.invoice_line_ids" t-as="productline">
                    <td >
                      <div>
                        <span t-esc="productline_index + 1" />
                      </div>
                    </td>
                    <td>
                      <div>
                        <span t-field="productline.product_id"/>
                      </div>
                    </td>
                    <td >
                      <div>
                        <span t-field="productline.report_no"/>
                      </div>
                    </td>
                    <td >
                      <div>
                        <span t-field="productline.quantity"/>
                      </div>
                    </td>
                    <td >
                      <div>
                        <span t-field="productline.product_uom_id"/>
                      </div>
                    </td>
                    <td >
                      <div>
                        <span t-field="productline.tax_ids"/>
                      </div>
                    </td>
                    <td >
                      <div>
                        <span t-field="productline.price_subtotal"/>
                      </div>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>

            <tr>
              <td rowspan="1" colspan="12">
                <div class="amountWords">Untaxed Amount :                                                                                                             <![CDATA[&nbsp;]]>
                  <b>
                    <span t-esc="report_data['tax_totals']['formatted_amount_untaxed']"/>
                  </b>
                </div>
                <div class="amountWords">SGST :                                                                                                             <![CDATA[&nbsp;]]>
                  <b>
                    <span t-esc="report_data['tax_totals']['groups_by_subtotal']['Untaxed Amount'][0]['formatted_tax_group_amount']"/>
                  </b>
                </div>
                <div class="amountWords">CGST :                                                                                                             <![CDATA[&nbsp;]]>
                  <b>
                    <span t-esc="report_data['tax_totals']['groups_by_subtotal']['Untaxed Amount'][1]['formatted_tax_group_amount']"/>
                  </b>
                </div>
                <div class="amountWords">Amount chargeable :                                                                                                             <![CDATA[&nbsp;]]>
                  <b>
                    <span t-esc="report_data['tax_totals']['formatted_amount_total']"/>
                  </b>
                </div>
                <!-- <div class="amountWords">Amount chargeable (in Words) :                                                                                                              <![CDATA[&nbsp;]]>
                  <b>
                    <span t-esc="data.currency_id.amount_to_text(report_data['tax_totals']['amount_total'])"/>
                  </b>
                </div> -->
              </td>
            </tr>

            <tr>
              <td rowspan="1" colspan="12">
              <div>
                <div style="text-align:start">
                  Amount chargeable (in Words) :
                </div>
                 <div class="amountWords">                                                                                                              <![CDATA[&nbsp;]]>
                  <b>
                    <span t-esc="data.currency_id.amount_to_text(report_data['tax_totals']['amount_total'])"/>
                  </b>
                </div>
              </div>
              </td>
            </tr>
            <tr>
              <td rowspan="1" colspan="12">
                <div class="decleration">
                        I/We certify that our registration under the GST Act, 2017 is in force
                        on which the supply of goods specified in this Tax Invoice is made by
                        me/us                                                                                                                                                                                                                                           <![CDATA[&]]> the transaction of supply covered by this Tax Invoice had been
                        effected by me/us                                                                                                                                                                                                                                           <![CDATA[&]]> it shall be accounted for the turnover of supplies
                        while filling return                                                                                                                                                                                                                                           <![CDATA[&]]> the due tax if any payable on the supplies had
                        been paid or shall be paid. Further certified that the particulars
                        given above are true and correct                                                                                                                                                                                                                                           <![CDATA[&]]> the amount indicated represents the
                        prices actually charged and that there is no flow additional
                        consideration directly and indirectly from the buyer.
                </div>
              </td>
            </tr>

            <tr>
              <td colspan="6" class="termsConditons">
                <div>
                  <b>Terms                                                                                                                                                                                                                                                                     <![CDATA[&]]> Conditions</b>
                </div>
                <div>
                        1. Any discrepancy about this invoice must be lodged within two days
                        of presentation
                </div>
                <div>
                        2. Payment should be made by payee's account cheque / cash / NEFT /
                        RTGS / online transaction.
                </div>
                <div>
                        3. Interest at the rate of 18% per annum will be charged if the bill
                        is not paid Within the Stipulated time.
                </div>
                <div>4. All disputes Subject to Mumbai Jurisdiction only.</div>
                <div>
                        5. While making payment please always mention our bill/ invoice No. On
                        The Back Of Each Cheques / Draft
                </div>
              </td>
              <td colspan="6">
                <div t-foreach="request.env.ref('base.main_partner')" t-as="c" class="centerText" style="min-height: 80px">
                  <b>For                                                                                 <![CDATA[&nbsp;]]>
                    <span t-field="c.name"/>
                  </b>
                </div>
                <div class="centerText">(                  <span t-field="o.signed_by"/>
)</div>
                <div class="centerText">Authorized Signatory</div>
              </td>
            </tr>
            <tr>
              <td colspan="6" class="paymentDetails">
                <div>
                  <b>Payment Details</b>
                </div>
                <div t-foreach="request.env.ref('base.main_partner')" t-as="c">
                  <div>
                    <label
                            >Favoring <span>:</span><![CDATA[&nbsp;]]>
                      <span t-field="c.name"/>
                    </label
                          >
                  </div>
                </div>
                <div>
                  <div>
                    <label>Bank Name</label>
                    <![CDATA[&nbsp;]]>
                    <span>:</span><![CDATA[&nbsp;]]>
                    <span t-field="c.bank_name"/>
                  </div>
                </div>
                <div>
                  <div>
                    <label>A/C No. </label>
                    <![CDATA[&nbsp;]]>
                    <span>:</span><![CDATA[&nbsp;]]>
                    <span t-field="c.ac_no"/>
                  </div>
                </div>
                <div>
                  <div>
                    <label>IFSC CODE</label>
                    <![CDATA[&nbsp;]]>
                    <span>:</span><![CDATA[&nbsp;]]>
                    <span t-field="c.ifsc_code"/>
                  </div>
                </div>
                <div>
                  <div>
                    <label>Branch Name</label>
                    <![CDATA[&nbsp;]]>
                    <span>:</span><![CDATA[&nbsp;]]>
                    <span t-field="c.branch_name"/>
                  </div>
                </div>
                <div class="sacgst">
                  <div>
                    <label>SAC Code</label>
                    <![CDATA[&nbsp;]]>
                    <span>:</span><![CDATA[&nbsp;]]>
                    <span t-field="c.sac_code"/>
                  </div>
                  <div>
                    <label>GST No.</label>
                    <![CDATA[&nbsp;]]>
                    <span>:</span><![CDATA[&nbsp;]]>
                    <span t-field="c.vat"/>
                  </div>
                </div>
              </td>
              <td style="vertical-align: middle">
                <div class="centerText">
                  <b> MSME REG NO. :                                                                                                     <![CDATA[&nbsp;]]>
                    <span t-field="c.msme_reg_no"/>
                  </b>
                </div>
              </td>
              <td style="position: relative;">
                <div style="min-height:60px">
                  <b> Signature </b>
                </div>
                <div style="min-height:60px">
                  <b> Receiver's Name </b>
                </div>
                <div style="min-height:60px">
                  <b> Mobile No. </b>
                </div>
                <div class="eoe">
                  <b>
                    E.                    <![CDATA[&]]> O. E.
                  </b>
                </div>
              </td>
            </tr>
          </table>
        </div>
      </t>
    </t>
  </template>
</odoo> 